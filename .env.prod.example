# =============================================================================
# CONFIGURAÇÃO DE PRODUÇÃO - PORTAINER
# =============================================================================
# IMPORTANTE: Copie este arquivo para .env.prod e preencha com valores reais!
# NUNCA commite o arquivo .env.prod com dados sensíveis!
# =============================================================================

# =============================================================================
# SEGURANÇA
# =============================================================================

# CRÍTICO: Gere uma chave secreta forte e única!
# Gere com: python -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"
SECRET_KEY=ALTERE-ISSO-POR-UMA-CHAVE-SECRETA-FORTE-E-ALEATORIA

# Debug DEVE ser False em produção!
DEBUG=False

# Hosts permitidos
# IMPORTANTE: Use '*' para permitir todos os hosts
# A validação de segurança é feita no TenantMiddleware (apps/landings/middleware.py)
# Domínios não registrados retornam 404 automaticamente
ALLOWED_HOSTS=*

# CSRF trusted origins (apenas domínios do sistema, não landing pages)
# Landing pages públicas não precisam de CSRF (apenas visualização)
CSRF_TRUSTED_ORIGINS=https://propzy.com.br,https://*.propzy.com.br,https://app.propzy.com.br,http://localhost,http://127.0.0.1


# =============================================================================
# MULTI-TENANT / LANDING PAGES
# =============================================================================

# Domínio base do sistema
BASE_DOMAIN=propzy.com.br

# SEGURANÇA MULTI-TENANT:
# - ALLOWED_HOSTS='*' permite qualquer host
# - TenantMiddleware valida se domínio está registrado no banco
# - Domínios não registrados retornam 404 automaticamente
# - Logging de tentativas maliciosas habilitado
# - Proteção contra SQL injection, CRLF injection, Unicode attacks
# Ver: apps/landings/middleware.py e docs/SECURITY_PENTESTING.md


# =============================================================================
# BANCO DE DADOS
# =============================================================================

DB_ENGINE=django.db.backends.postgresql
DB_NAME=propzy_prod
DB_USER=propzy_user
DB_PASSWORD=ALTERE-ISSO-POR-SENHA-FORTE-DO-POSTGRES
DB_HOST=db
DB_PORT=5432


# =============================================================================
# REDIS (Cache + Celery)
# =============================================================================

REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=ALTERE-ISSO-POR-SENHA-FORTE-DO-REDIS
REDIS_DB=0


# =============================================================================
# INTERNACIONALIZAÇÃO
# =============================================================================

LANGUAGE_CODE=pt-br
TIME_ZONE=America/Porto_Velho
USE_I18N=True
USE_TZ=True


# =============================================================================
# CELERY
# =============================================================================

CELERY_WORKER_CONCURRENCY=4
CELERY_WORKER_MAX_TASKS_PER_CHILD=1000
CELERY_WORKER_PREFETCH_MULTIPLIER=4
CELERY_TASK_TIME_LIMIT=300
CELERY_TASK_SOFT_TIME_LIMIT=240
CELERY_TASK_DEFAULT_RETRY_DELAY=60
CELERY_TASK_MAX_RETRIES=3
CELERY_RESULT_EXPIRES=3600


# =============================================================================
# E-MAIL (Configure com seu SMTP)
# =============================================================================

EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USE_TLS=True
EMAIL_HOST_USER=seu-email@gmail.com
EMAIL_HOST_PASSWORD=sua-senha-de-app-do-gmail
DEFAULT_FROM_EMAIL=noreply@propzy.com.br


# =============================================================================
# SEGURANÇA (Produção)
# =============================================================================

# Redireciona HTTP para HTTPS
SECURE_SSL_REDIRECT=True

# Cookies seguros (apenas HTTPS)
SESSION_COOKIE_SECURE=True
CSRF_COOKIE_SECURE=True

# HSTS (HTTP Strict Transport Security)
SECURE_HSTS_SECONDS=31536000
SECURE_HSTS_INCLUDE_SUBDOMAINS=True
SECURE_HSTS_PRELOAD=True

# Proxy reverso (Cloudflare/NGINX)
# IMPORTANTE: Necessário para funcionar corretamente com Cloudflare
USE_X_FORWARDED_HOST=True
SECURE_PROXY_SSL_HEADER=HTTP_X_FORWARDED_PROTO,https


# =============================================================================
# AWS S3 (Opcional - para armazenar mídia em nuvem)
# =============================================================================

USE_S3=False
# AWS_ACCESS_KEY_ID=
# AWS_SECRET_ACCESS_KEY=
# AWS_STORAGE_BUCKET_NAME=
# AWS_S3_REGION_NAME=us-east-1


# =============================================================================
# LOGGING
# =============================================================================

# Níveis: DEBUG, INFO, WARNING, ERROR, CRITICAL
# Use DEBUG apenas para troubleshooting, WARNING em produção
LOG_LEVEL=WARNING


# =============================================================================
# SENTRY (Opcional - para monitoramento de erros)
# =============================================================================

# SENTRY_DSN=https://....


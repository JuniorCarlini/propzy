{% extends "base.html" %} {% load i18n %} {% block title %}{% trans "Grupos e
permissões" %} · propzy{% endblock %} {% block header %}
<div
  class="d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-3 mb-4"
>
  <div>
    <h1 class="h4 mb-1">{% trans "Grupos e permissões" %}</h1>
    <p class="text-body-secondary mb-0">
      {% trans "Organize as permissões de acesso por perfis." %}
    </p>
  </div>
  {% if perms.auth.add_group %}
  <a href="{% url 'accounts:group_create' %}" class="btn btn-primary">
    <i class="bi bi-plus-circle me-2"></i> {% trans "Criar grupo" %}
  </a>
  {% endif %}
</div>
{% endblock %} {% block content %}
<div class="card shadow-sm border-0">
  <div class="card-body p-0">
    <div class="table-responsive">
      <table class="table table-striped align-middle mb-0">
        <thead class="table-light">
          <tr>
            <th scope="col">{% trans "Grupo" %}</th>
            <th scope="col" class="d-none d-md-table-cell">
              {% trans "Permissões" %}
            </th>
            <th scope="col" class="text-end">{% trans "Ações" %}</th>
          </tr>
        </thead>
        <tbody>
          {% for group in groups %}
          <tr>
            <td>{{ group.name }}</td>
            <td class="d-none d-md-table-cell">
              {% if group.formatted_permissions %}
              <div class="d-flex flex-wrap gap-1">
                {% for permission_label in group.formatted_permissions %}
                <span class="badge text-bg-secondary"
                  >{{ permission_label }}</span
                >
                {% endfor %}
              </div>
              {% else %}
              <span class="text-body-secondary"
                >{% trans "Sem permissões" %}</span
              >
              {% endif %}
            </td>
            <td class="text-end">
              <div class="btn-group" role="group">
                {% if perms.auth.change_group %}
                <a
                  href="{% url 'accounts:group_update' group.pk %}"
                  class="btn btn-outline-secondary btn-sm"
                  title="{% trans 'Editar' %}"
                >
                  <i class="bi bi-pencil"></i>
                </a>
                {% endif %} {% if perms.auth.delete_group %}
                <a
                  href="{% url 'accounts:group_delete' group.pk %}"
                  class="btn btn-outline-danger btn-sm"
                  title="{% trans 'Excluir' %}"
                >
                  <i class="bi bi-trash"></i>
                </a>
                {% endif %}
              </div>
            </td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="3" class="text-center py-5 text-body-secondary">
              {% trans "Nenhum grupo cadastrado." %}
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>

<div class="mt-4">
  <a href="{% url 'accounts:user_list' %}" class="btn btn-outline-secondary">
    <i class="bi bi-people me-2"></i> {% trans "Voltar para usuários" %}
  </a>
</div>
{% endblock %}

{% extends "base_authentication.html" %}

{% load i18n crispy_forms_tags static %}

{% block title %}{% trans "Entrar" %} | Propzy{% endblock %}

{% block auth_content %}
<h1 class="h3 mb-4" style="color: #13112F; font-weight: 600;">{% trans "Entrar" %}</h1>
<form method="post" novalidate id="loginForm">
    {% csrf_token %}
    {% if form.non_field_errors %}
    <div class="alert alert-danger" role="alert" style="line-height: 1.6;">
        <ul class="mb-0 ps-3" style="list-style-type: none; padding-left: 0;">
            {% for error in form.non_field_errors %}
            <li style="margin-bottom: 0.25rem;">
                <i class="fa-solid fa-circle-exclamation" style="margin-right: 0.5rem;"></i>{{ error }}
            </li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}
    <div class="mb-3">
        <label for="{{ form.login.id_for_label }}" class="form-label">{{ form.login.label }}</label>
        <input
            type="email"
            class="form-control"
            id="{{ form.login.id_for_label }}"
            name="{{ form.login.name }}"
            placeholder="seu@email.com"
            value="{{ form.login.value|default:'' }}"
            required
            autocomplete="email"
        >
        {% if form.login.errors %}
            <div class="text-danger small mt-2" style="line-height: 1.6;">
                <ul class="mb-0 ps-3" style="list-style-type: none; padding-left: 0;">
                    {% for error in form.login.errors %}
                    <li style="margin-bottom: 0.25rem;">
                        <i class="fa-solid fa-circle-exclamation" style="margin-right: 0.5rem;"></i>{{ error }}
                    </li>
                    {% endfor %}
                </ul>
            </div>
        {% endif %}
    </div>
    <div class="mb-3">
        <label for="{{ form.password.id_for_label }}" class="form-label">{{ form.password.label }}</label>
        <div class="password-input-wrapper">
            <input
                type="password"
                class="form-control"
                id="{{ form.password.id_for_label }}"
                name="{{ form.password.name }}"
                placeholder="••••••••"
                required
                autocomplete="current-password"
            >
            {% trans "Mostrar senha" as aria_label_show_password %}
            <button
                type="button"
                class="password-toggle-btn"
                aria-label="{{ aria_label_show_password }}"
            >
                <i class="fa fa-eye"></i>
            </button>
        </div>
        {% if form.password.errors %}
            <div class="text-danger small mt-2" style="line-height: 1.6;">
                <ul class="mb-0 ps-3" style="list-style-type: none; padding-left: 0;">
                    {% for error in form.password.errors %}
                    <li style="margin-bottom: 0.25rem;">
                        <i class="fa-solid fa-circle-exclamation" style="margin-right: 0.5rem;"></i>{{ error }}
                    </li>
                    {% endfor %}
                </ul>
            </div>
        {% endif %}
    </div>
    {% if 'remember' in form.fields %}
    <div class="mb-3">
        <div class="form-check">
            <input
                class="form-check-input"
                type="checkbox"
                id="{{ form.remember.id_for_label }}"
                name="{{ form.remember.name }}"
                {% if form.remember.value %}checked{% endif %}
            >
            <label class="form-check-label" for="{{ form.remember.id_for_label }}" style="color: #13112F; font-size: 14px;">
                {{ form.remember.label }}
            </label>
        </div>
    </div>
    {% endif %}
    <button class="btn btn-primary" type="submit">{% trans "Acessar Sistema" %}</button>
</form>
<div class="text-center mt-3">
    <a href="{% url 'account_reset_password' %}" style="color: #006DFF; font-size: 14px; text-decoration: none;">
        {% trans "Esqueceu sua senha?" %}
    </a>
</div>
{% endblock %}
